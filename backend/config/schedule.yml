# Sidekiq Scheduler Configuration
# This file defines scheduled jobs that run automatically

# Process billing for subscriptions due today
# Runs daily at 9:00 AM EAT (East Africa Time)
process_billing:
  cron: '0 9 * * *'  # Every day at 9:00 AM
  class: ProcessBillingJob
  queue: critical
  description: 'Process billing for all subscriptions due today'

# Check subscription status and suspend overdue subscriptions
# Runs daily at 10:00 AM EAT (1 hour after billing)
check_subscription_status:
  cron: '0 10 * * *'  # Every day at 10:00 AM
  class: CheckSubscriptionStatusJob
  queue: default
  description: 'Check subscription status, suspend overdue subscriptions, and convert expired trials'

# Check pending STK Push transactions and process successful ones
# Runs every 15 minutes to catch payments where callback failed
check_stk_push_status:
  every: '15m'
  class: CheckStkPushStatusJob
  queue: default
  description: 'Check pending STK Push transactions and process successful ones'

# Optional: Add more scheduled jobs here
# Example: Weekly reports, monthly summaries, etc.

